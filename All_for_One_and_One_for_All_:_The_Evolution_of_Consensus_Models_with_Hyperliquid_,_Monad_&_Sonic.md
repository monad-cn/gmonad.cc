---
title: The Evolution of Consensus Models with Hyperliquid, Monad & Sonic
description: Hyperliquid、Monad 和 Sonic 共识模型的演变
image: /blog/a0.jpg
---

# All for One and One for All: The Evolution of Consensus Models with Hyperliquid, Monad & Sonic

:::tip 原文
https://x.com/castle_labs/status/1912153794571272637  
翻译：keyneszeng
:::

### 1.共识可以修复区块链吗？

共识机制确保网络中的每台计算机根据一组共识规则将那些交易需要得到一致且安全的验证添加到区块链达成一致。
每个区块链都试图在区块链的三难困境中取得平衡：平衡速度、安全性和去中心化。项目通常只能优先考虑其中两个特性，而牺牲第三个特性。 
![a0](/blog/a0.png)

共识机制对于防止恶意行为者成功篡改网络或其数据至关重要。它能够防止双重支付，保持一切同步，同时确保区块链中的每个节点为每个区块生成相同的交易序列。 
可以将它们视为去中心化游戏的规则，引导参与者走向统一的“真理”。以下是一些关键共识机制的概述：
- 工作量证明 (PoW)：矿工利用算力解决复杂难题，从而生成区块，并获得加密货币奖励。PoW 安全可靠，但耗能高且速度慢（例如比特币、2022 年之前的以太坊）。
- 权益证明 (PoS)：验证者质押加密货币，以获得创建区块的机会。这种方法节能且速度更快，但可能更有利于较富裕的参与者（例如 2022 年后的以太坊、卡尔达诺）。
- 委托权益证明 (DPoS)：代币持有者投票选举代表来验证交易，提供速度和可扩展性，但存在中心化风险（例如 EOS、Tron）。
- 权威证明（PoA）：可信节点基于身份进行验证，使其快速高效，但去中心化程度较低（例如，VeChain）。

尽管区块链带来了去中心化的承诺，但这些承诺很少转化为预期的表现，尤其是对于蓝筹股而言： 
- 比特币平均每秒进行 7 笔交易 (TPS)。
- 以太坊 PoS 后达到 15-30 TPS。
- 相比之下，Visa 的日均 TPS 为 1,700。

这些差距引发了延迟、拥堵和高额费用，暴露出可扩展性的挑战。

# 1.2 新的共识模型
新兴的 Layer-1（L1）技术@Hyperliquidx，@Monad_xyz， 和@Soniclabs正在催生专门为解决这些挑战而设计的新的共识机制，在增强信任的同时提高速度、可扩展性和影响力。
本文深入探讨了这些项目如何应对区块链的三难困境，并进一步推进共识设计。我们将深入探讨每个项目的背景、共识机制、与以太坊的关系、可扩展性解决方案、实际应用、融资和治理方法以及主要挑战。 


### 2.Hyperliquid

![a1](/blog/a1.png)

Hyperliquid 是一个 L1 区块链，专为高速、低成本的去中心化交易而构建。它分为两大支柱：
- HyperCore ：具有单区块最终确定性的永续期货和现货订单簿的链上引擎。
- HyperEVM：一个与以太坊兼容的智能合约平台。

![a2](/blog/a2.png)

传统的 L1 面临着去中心化、性能和可访问性之间的权衡，而 Hyperliquid 则致力于通过提供高性能、完全链上交易生态系统来克服这些挑战。
- HyperCore每秒可处理多达 200,000 个订单，随着节点软件升级，这一理论峰值还将不断增长。
- HyperEVM将以太坊的智能合约平台引入 Hyperliquid，并将 HyperCore 的流动性和金融工具作为开放资源提供。

借助HyperCore和HyperEVM ，该团队的目标是在不牺牲效率或用户体验的情况下，实现去中心化应用程序 (dApps)和区块链组件之间的无缝交互。

# 2.1共识机制
Hyperliquid 最初采用的是Tendermint 共识算法，但为了更好地支持高频交易并实现更高的交易吞吐量，需要更先进的解决方案。
为了解决这个问题，Hyperliquid 开发了一种名为HyperBFT的共识机制。该混合系统将PoS与拜占庭容错 (BFT) 相结合，并针对高吞吐量、低延迟和强大的安全性进行了优化。   
PoS 模型基于HotStuff协议，其中验证者通过质押来生成区块 炒作代币。HyperBFT的混合方法比传统的PoW方法更节能，同时保持了强大的安全性。

# 2.2 可扩展性和速度
HyperBFT实现了 0.2 秒的中位最终确定性，延迟低于 0.9 秒。链上订单簿模拟中心化交易所的精确度，支持 50 倍杠杆、一键交易和止损功能。
Hyperliquid 在高吞吐量场景下表现出色，无需分片即可并发处理 20 万 TPS。目前，其主要受限于网络延迟和验证器分布。

# 2.3 挑战
- 验证者数量少（安全性）：Hyperliquid 相对中心化，只有 16 个验证者，而以太坊庞大的网络拥有超过 80 万个验证者。他们的目标是随着网络的发展不断扩展验证者数量，以符合其去中心化的目标。
- 其抵御重大网络攻击的能力未经测试，这引发了人们对其长期去中心化和稳健性的质疑。这种中心化带来了安全风险，尤其是对于桥梁中价值23亿美元的$USDC而言，是 2024 年黑客攻击的目标。
- 中心化影响：2025 年 3 月，Hyperliquid 遭遇了一起事件，$JELLY一名交易员通过创建三个账户并持有杠杆头寸来操纵平台的清算系统：两个多头账户总计 405 万美元，一个空头账户总计 410 万美元。$JELLY期货。这导致价格飙升400%，交易员自行清算，导致Hyperliquid的金库持有价值600万美元的空头头寸。这导致流动性提供者的未实现损失估计在70万至1000万美元之间。然而，在Hyperliquid介入后，金库获利70万美元，Hyperliquid最终下架了该合约。$JELLY合同，引发了关于权力下放和治理透明度的争论。
- 高杠杆交易风险：2025 年 3 月 13 日，一只鲸鱼爆仓$ETH通过高杠杆交易做多头寸，导致HLP Vault损失约400万美元。此类事件凸显了该平台易受市场操纵的弱点，以及制定稳健风险管理策略的必要性。
- 竞争：Hyperliquid 的闭源代码和缺乏自动验证器惩罚机制，限制了其透明度和弹性。来自 Solana 等高吞吐量平台、Monad 和 MegaETH 等新兴 L1 以及 dYdX 等先进的 DEX 的竞争，带来了挑战。
- 可扩展性：Hyperliquid 的设计充分考虑了可扩展性，最高可处理 20 万 TPS 交易，并实现亚秒级最终确定性。然而，在极端情况下，例如大规模杠杆交易，可能会带来流动性紧张或验证者协调延迟等挑战。

### 3.Monad

![a3](/blog/a3.png)

Monad 是与EVM兼容的 L1，具有可扩展性和性能，使用并行执行和MonadBFT。
Monad 的目标是每秒处理 1 万个区块，每 500 毫秒生成一个区块，并在一秒内完成最终确认。它致力于促进去中心化，同时解决以太坊的瓶颈问题（例如速度慢、费用高、可扩展性有限）。其测试网已于 2025 年 2 月 19 日上线，主网预计将于 2025 年第三季度至第四季度上线。

# 3.1 共识机制
Monad 的架构以其定制的MonadBFT 共识机制为中心，这是 HotStuff BFT 协议的优化演变。
它集成了流水线执行和高效通信，以区别于传统的区块链设计。
- MonadBFT ：该算法将HotStuff 的三阶段流程简化为两阶段，从而提升了验证器的速度。验证器轮流担任领导者：一个验证器负责提议一个区块，并将之前的投票汇总到法定人数证书 (QC) 中，QC 是用于验证前一个区块的共识证明。如果领导者发生故障，超时机制可保持网络的稳健性，从而在部分同步设置下确保安全性。  
- 并行执行：并行执行是指同时处理多个任务或交易的能力，而不是一次处理一个。节点首先就交易顺序达成一致，然后使用乐观方法在多个线程上并发执行交易。这确保了与顺序结果的一致性，同时显著提高了吞吐量。
- PoS ：验证者质押代币参与，通过经济激励来保障网络安全。该PoS 系统兼顾了速度和安全性，质押的资产可以有效阻止恶意行为。
MonadBFT通过减少通信开销为实时 dApp 提供可扩展、可靠的最终性，
下图说明了 MonadBFT 的流水线流程，展示了验证者（Alice、Bob、Charlie、David 等）如何在重叠的回合中提议、投票和最终确定区块（N、N+1、N+2 等）。

![a4](/blog/a4.png)

每个区块都会经历几个阶段：提议、投票和最终确定。验证者轮流担任领导，并产生QC来验证区块。

# 3.2可扩展性和速度
Monad 将MonadBFT 的高效性与并行执行相结合，使其能够并发处理交易、避免分片并确保快速完成，从而超越传统的 Layer1。其理论容量可能高于上述值（10k TPS，亚秒级完成度），但实际结果取决于网络延迟和验证者分布。

# 3.3 挑战
- 执行复杂性：Monad 的乐观并行执行可能导致不一致、回滚或漏洞（例如，边缘情况漏洞）。其高级功能（MonadBFT和并行执行）增加了复杂性，增加了开发和维护成本，尤其对于小型团队而言。这可能会阻碍增长和安全性，给小型团队带来挑战，因此它更受拥有更多资源和开发经验的团队的青睐。
- 网络延迟：现实世界的 TPS 和最终性依赖于验证器分布和延迟，因此存在性能不佳的风险。
- 未经测试的规模：在主网之前，Monad 的 10,000 TPS 声明仍未经证实，可能存在错误或瓶颈。
- 竞争：Sonic、Arbitrum 和 Solana 等高吞吐量平台竞争对手可能会挑战开发人员和用户的采用。
- 学习曲线：尽管兼容 EVM ，但 Monad 独特的系统（MonadBFT、MonadDB ）可能会减慢开发人员的入门速度。
- 中心化：早期基金会的控制和集中的代币模型可能会集中权力，威胁长期的权力下放和安全。

### 4.Sonic

![a5](/blog/a5.png)

Sonic 是与 EVM 兼容的 L1，具有高吞吐量和亚秒级交易终结性，由Fantom Opera生态系统发展而来。
Sonic 推出了显著的操作增强功能：其最新的共识协议SonicCS 2.0将共识速度提高了 2 倍，每个时期的内存使用量减少了 68%（从 420 MB 减少到 135 MB），降低了验证者的资源需求并提高了可扩展性。

这些升级解决了几个区块链挑战：
- 交易处理缓慢
- 运营成本高
- 生态系统碎片化

凭借更名后的品牌形象，Sonic 通过其费用货币化计划 (FeeM)重新分配高达 90% 的网络交易费用来激励开发人员，促进 dApp 的创建和采用。

# 4.1 共识机制

Sonic 的Lachesis 共识将有向无环图 (DAG)与异步拜占庭容错 (ABFT)相结合，超越了 Fantom Opera 的基础。
- ABFT ：允许验证者异步处理交易并交换区块。这消除了基于实用拜占庭容错 (PBFT)的系统的顺序延迟，从而提高了吞吐量和弹性。
- DAG ：交易以顶点表示，依赖关系以 DAG 边表示，从而支持并发区块添加。与线性区块链设计相比，这加快了验证速度，形成了一个互联的网状结构，而非单条链。
- PoS ：验证者至少质押 50 万$S代币参与，将交易批量打包到本地 DAG 中的事件块中。当足够多的验证者确认这些区块为主链上的“根”时，即达成共识，实现亚秒级最终确定性。该PoS系统平衡了速度、安全性和去中心化，并通过质押代币来遏制不当行为。

下图说明了特定节点的DAG ：
- 橙色事件代表候选人领导人事件
- 黄色事件表示承诺的领导者事件。
这些领导者之间的事件可以按顺序排列成一个链，从而可以提取交易列表来构建一个区块。

![a6](/blog/a6.png)

# 4.2 SonicCS 2.0 - 最新的共识机制升级
Sonic 近期升级了其共识机制，并于 2025 年 3 月 27 日发布了 SonicCS 2.0。该协议采用基于DAG的重叠选举机制，将计算工作量和内存使用量减少了 68%。对 Sonic 主网 200 个 epoch 数据的实验表明，平均速度提升了 2.04 倍（范围从 1.37 倍到 2.62 倍），内存使用效率也显著提升，进一步增强了 Sonic 处理超过 10,000 TPS 并实现亚秒级最终确定性的能力。SonicCS 2.0 即将在主网发布，详细的技术报告即将发布。

# 4.3 可扩展性和速度
Sonic 的混合Lachesis 共识机制将DAG 的适应性与ABFT 的完整性相结合，无需分片即可实现快速、安全的交易最终确定。此设计支持随着网络需求的增长而实现无缝扩展。
SonicCS 2.0有望使 Sonic 主网的性能更接近理论预估的 396,825 个 TP。然而，需要指出的是，实际结果取决于网络延迟和验证者分布。根据@AndreCronjetech在 Sonic 上测得的最大实时 TPS 已经达到 5,140 左右，这相当令人印象深刻。
Sonic 完全兼容 EVM ，并在此框架内优化性能，而非用其他虚拟机取代它。SonicCS 2.0 的矢量化运算和重叠选举机制提升了验证器效率和 dApp 性能。

![a7](/blog/a7.png)

# 4.4 挑战
- 共识复杂性：在高负载下，Sonic 的共识机制可能会引入复杂的依赖关系或验证延迟，从而导致效率低下或漏洞利用的风险。 
- 开发人员适应：虽然与 EMV 兼容，但 Sonic 的高级功能（例如，SonicCS 2.0 的矢量化投票）可能需要开发人员调整工作流程，从而可能减慢采用速度。
- 网络延迟：亚秒级最终性和 10k TPS 取决于验证器分布和延迟，这可能会降低实际性能。
- 未经测试的规模：在SonicCS 2.0主网推出之前，10k TPS 声明缺乏完整的现实世界验证，并且可能的瓶颈或错误尚未出现。
- L2 主导地位：以太坊的 L2 解决方案（例如 Optimism、zkSync）以更低的成本提供类似的性能，并充分利用了巨大的流动性和开发者生态系统。Sonic 的 Sonic Gateway 桥接器有助于实现互操作性，但作为独立的 L1 进行竞争仍然充满挑战。
- 集中化：500,000$S质押要求和 Sonic 基金会的早期控制可能会导致权力集中，如果代币分配有利于内部人员，则可能会疏远注重权力下放的用户并削弱安全性。


### 5.比较表

![a8](/blog/a8.png)

### 6.利用以太坊的生态系统

Hyperliquid、Monad 和 Sonic 均利用EVM 兼容性，使开发者能够使用熟悉的工具和智能合约在高速基础架构上部署 dApp。这实现了低成本、高吞吐量的交易和强大的安全性，无需重写代码即可融入以太坊生态系统。

- 为多样化的 dApp 提供支持
这些 L1 提供亚秒级确认时间和高 TPS 容量，使其成为可无缝部署的各种 dApp 的理想选择。
Hyperliquid 通过链上订单簿提供快速、安全的 DEX 交易，匹配中心化交易所的精度和高可扩展性。
Sonic 为高效的 DeFi 应用程序添加了快速终结性，可在一秒内确保交易安全。
Monad 通过 10,000 TYPS、1 秒区块时间和单槽终结性增强了这一点。

- 超越 Web3：企业潜力
这些网络的速度和可扩展性使其非常适合企业在金融、供应链和支付领域使用。零售商可以以较低的成本处理大额支付，而医疗保健提供商则可以确保实时患者数据与现有系统兼容。


### 7.L2 作为以太坊解决扩展问题的答案

那么 L2 呢？我们为什么需要新的、拥有复杂共识机制的 L1 区块链呢？ 
- Arbitrum、Optimism 和 Base等 Layer-2 解决方案通过链下交易处理提升了 Layer-1 的可扩展性。Arbitrum 实现了高达 4,000 TPS 的吞吐量，而 Base 的目标是到 2025 年中期实现数千 TPS，并实现 0.2 秒的 Flashblock 速度。
- 然而，Layer-2 依赖于以太坊的安全性和最终性，继承了其特性和局限性。例如，Optimistic Rollup 等系统对错误性证明的需求可能会导致延迟，因为 Optimism 的 OP Stack 链上的交易在其数据被纳入最终确定的以太坊区块时才会最终确定。这可能会影响用户体验，尤其是对于需要快速确定交易最终性的应用程序而言。
- Hyperliquid、Monad 和 Sonic 等新型 L1 区块链通过先进的共识机制解决了这些限制。与 L2 不同，这些 L1 无需依赖以太坊的基础设施即可实现高性能，从而避免了诸如错误性证明或 L1 区块时间瓶颈等复杂性。
- 然而，构建新的 Layer-1 会带来风险，可能会挑战去中心化或增加成本。虽然 Layer-1 区块链提供了安全性和去中心化的基础层，但由于共识机制和区块大小限制，它们常常面临可扩展性的挑战。此外，它们也不具备以太坊那样的历史性能和可信度。
- 在现有 L2 解决方案的情况下开发新的 L1 区块链的必要性是 Twitter 上正在讨论的话题：
L2 缓解了 L1 的拥堵，但其可扩展性却受限于以太坊的限制。它们的速度与以太坊一样快，但这并没有考虑到所有 L2 交易的最终性都取决于 L1 的区块确认时间。

与此同时，新的 L1 承诺独立性和速度，但它们必须证明它们可以安全地扩展到数十亿用户。
- L1 和 L2 解决方案之间的相互作用引发了有关区块链网络未来架构的关键问题。 
- 通过开发新的共识机制，是否可以有效地解决 L1 区块链的可扩展性挑战，或者尽管存在固有的权衡，但 L2 解决方案的集成是否必不可少？
- 这些考虑强调了区块链社区内部持续研究和对话的必要性，以解决可扩展性、安全性和去中心化的复杂性。​


### 8.结论与思考

- 当前市场面临的一大障碍是流动性稀薄且轮动性差，新老用户均受影响。用户关注度低且持续时间短，使得在这个拥挤的行业中保持市场份额增长变得更加困难。
- 因此，为了推动采用，必须优先考虑开发人员和用户的需求。
- 但说实话：大多数用户更关心实用功能，而不是底层技术。他们想要无缝的体验，快速的交易和低廉的费用，让网络更容易访问，尤其是在小额交易方面。
- 安全性也是不容置疑的：用户期望有强大的保障措施来保护他们的资产和数据，从而增强对系统的信任。当然，链上也需要有相应的功能，以满足不同类型的用户需求。
- 为了保持竞争力，L1 和 L2 都需要为这些利益而战。他们不应该只关注“最佳技术”并试图“过度改进”其区块链的共识机制，而应该务实，专注于为用户和开发者提供最佳的网络，以构建和使用他们的应用程序。
- 总而言之，像 Hyperliquid、Monad 和 Sonic 这样的新型 Layer-1 解决了 Layer-2 的依赖性问题，但也面临挑战，例如 Hyperliquid 的小型验证者池（仅有四个节点）加剧了共谋风险，暴露了诸多漏洞。扩展验证者、保护桥接、提高审批门槛、实时监控和异常检测可以增强系统的弹性。通过主动风险管理平衡安全性、可扩展性和去中心化，是建立信任和维持 DeFi 增长的关键，这促使用户仔细审查平台的安全措施，并促使开发者优先考虑强大的防御措施。
- 让“开发人员做点什么”：让他们承担繁重的技术工作并定义共识机制的权衡，从而推动寻求平衡。
- 另外，我们不要忘记用户：那些只是享受响应迅速、高效、分散和安全的应用程序的人。
- 这些新设计正在突破共识模型在速度、安全性和互操作性方面所能实现的界限。
- 一旦 Monad（和其他竞争对手）上线，看看它们如何发展以及如何交织将会很有趣。
